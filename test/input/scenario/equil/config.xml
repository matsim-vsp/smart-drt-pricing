<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE config SYSTEM "http://www.matsim.org/files/dtd/config_v2.dtd">
<config>
	<module name="controler" >
		<param name="lastIteration" value="10" />
		<param name="outputDirectory" value="test/output/org/matsim/run/RunOptDrtEquilScenarioTest/test/" />
		<param name="runId" value="equilTest" />
		<param name="overwriteFiles" value="deleteDirectoryIfExists" />
	</module>
	<module name="global" >
		<param name="numberOfThreads" value="1" />
		<param name="randomSeed" value="4711" />
	</module>
	<module name="drtSpeedUp" >
		<param name="firstSimulatedDrtIterationToReplaceInitialDrtPerformanceParams" value="0" />
		<param name="fractionOfIterationSwitchOn" value="0.0" />
		<param name="fractionOfIterationsSwitchOff" value="0.99" />
		<param name="initialBeelineFactorForDrtFare" value="1.5" />
		<param name="initialInVehicleBeelineSpeed" value="4.16667" />
		<param name="initialWaitingTime" value="900.0" />
		<param name="intervalDetailedIteration" value="2" />
		<param name="modes" value="drt" />
		<param name="movingAverageSize" value="1" />
		<param name="numberOfThreadsForMobsimDuringSpeedUp" value="4" />
		<!-- Possible values: Disabled, LinearRegression -->
		<param name="waitingTimeUpdateDuringSpeedUp" value="Disabled" />
	</module>
	<module name="multiModeDrt">
		<parameterset type="drt">
			<parameterset type="ExtensiveInsertionSearch"/>
			<param name="changeStartLinkToLastLinkInSchedule" value="true"/>
			<param name="estimatedBeelineDistanceFactor" value="1.3"/>
			<param name="estimatedDrtSpeed" value="8.333333333333334"/>
			<param name="idleVehiclesReturnToDepots" value="false"/>
			<param name="maxTravelTimeAlpha" value="1.7"/>
			<param name="maxTravelTimeBeta" value="120.0"/>
			<param name="maxWaitTime" value="300.0"/>
			<param name="maxWalkDistance" value="20000.0"/>
			<param name="mode" value="drt"/>
			<param name="numberOfThreads" value="1"/>
			<param name="operationalScheme" value="door2door"/>
			<param name="drtServiceAreaShapeFile" value="./equil-zone/equi-zone.shp" />
			<param name="rejectRequestIfMaxWaitOrTravelTimeViolated" value="false"/>
			<param name="stopDuration" value="60.0"/>
			<param name="transitStopFile" value="null"/>
			<param name="useModeFilteredSubnetwork" value="false"/>
			<param name="vehiclesFile" value="./drtVehicles.xml"/>
			<param name="writeDetailedCustomerStats" value="true"/>
		</parameterset>
	</module>
	<module name="drtfares" >
		<parameterset type="drtfare" >
			<!-- drt fare per meter (fee = positive value) -->
			<param name="distanceFare_m" value="0.000015" />
			<!-- Minimum fare per trip (paid instead of the sum of base, time and distance fare if that sum would be lower than the minimum fare, fee = positive value). -->
			<param name="minFarePerTrip" value="0" />
			<!-- transport mode for which the fare applies. Default: drt -->
			<param name="mode" value="drt" />
		</parameterset>
	</module>
	<module name="dvrp" >
		<!-- Mode of which the network will be used for throwing events and hence calculating travel times. Default is car. -->
		<param name="mobsimMode" value="car" />
		<!-- Set of modes of which the network will be used for DVRP travel time estimation and routing DVRP vehicles. Each specific DVRP mode may use a subnetwork of this network for routing vehicles (e.g. DRT buses travelling only along a specified links or serving a limited area). Default is "car" (i.e. single-element set of modes), i.e. the car network is used. Empty value "" (i.e. empty set of modes) means no network filtering, i.e. the original scenario.network is used -->
		<param name="networkModes" value="car" />
		<!-- Used for OFFLINE estimation of travel times for VrpOptimizer by means of the exponential moving average. The weighting decrease, alpha, must be in (0,1]. We suggest small values of alpha, e.g. 0.05. The averaging starts from the initial travel time estimates. If not provided, the free-speed TTs is used as the initial estimates -->
		<param name="travelTimeEstimationAlpha" value="0.05" />
		<!-- Used for ONLINE estimation of travel times for VrpOptimizer by combining WithinDayTravelTime and DvrpOfflineTravelTimeEstimator. The beta coefficient is provided in seconds and should be either 0 (no online estimation) or positive (mixed online-offline estimation). For 'beta = 0', only the offline estimate is used: 'onlineTT(t) = offlineTT(t)', where 'offlineTT(t)' in the offline estimate for TT at time 't', For 'beta > 0', estimating future TTs at time 't', uses the currently observed TT to correct the offline estimates is made: where 'currentTT' is the currently observed TT, and 'correction = min(1, max(0, 1 - (time - currentTime) / beta))' The rule is that correction decreases linearly from 1 (when 'time = currentTime') to 0 (when 'time = currentTime + beta' For 'time > currentTime + beta' correction is 0, whereas if 'time < currentTime' it is 1. If beta is sufficiently large, 'beta >> 0', only the currently observed TT is used. -->
		<param name="travelTimeEstimationBeta" value="0.0" />
	</module>
	<module name="smartDrtPricing" >
		<param name="drtMode" value="drt" />
		<param name="maxDrtDistance" value="40000.0" />
		<param name="penaltyFactor" value="1.0" />
		<param name="penaltyRatioThreshold" value="0.876805393" />
		<!-- Possible values: poly, exponents -->
		<param name="penaltyRatioThresholdCalculator" value="exponents" />
		<param name="penaltyRatioThresholdFactorA" value="1.659865279" />
		<param name="penaltyRatioThresholdFactorB" value="0.047588985" />
		<param name="penaltyRatioThresholdFactorC" value="0.0" />
		<param name="penaltyStrategy" value="true" />
		<param name="rewardFactor" value="0.5" />
		<param name="rewardRatioThreshold" value="1,2" />
		<!-- Possible values: poly, exponents -->
		<param name="rewardRatioThresholdCalculator" value="exponents" />
		<param name="rewardRatioThresholdFactorA" value="0,1" />
		<param name="rewardRatioThresholdFactorB" value="0,1" />
		<param name="rewardRatioThresholdFactorC" value="0.0,1" />
		<param name="rewardStrategy" value="true" />
		<param name="supportDrtSpeedUp" value="true" />
		<param name="writeFileInterval" value="1" />
	</module>

	<module name="network" >
		<param name="inputNetworkFile" value="network.xml" />
	</module>
	<module name="planCalcScore" >
		<!-- logit model scale parameter. default: 1.  Has name and default value for historical reasons (see Bryan Raney's phd thesis). -->
		<param name="BrainExpBeta" value="2.0" />
		<parameterset type="scoringParameters" >
			<param name="lateArrival" value="0.0" />
			<parameterset type="activityParams" >
				<param name="activityType" value="dummy" />
				<!-- typical duration of activity.  needs to be defined and non-zero.  in sec. -->
				<param name="typicalDuration" value="02:00:00" />
			</parameterset>
			<parameterset type="activityParams" >
				<param name="activityType" value="drt interaction" />
				<param name="priority" value="1.0" />
				<param name="scoringThisActivityAtAll" value="false" />
			</parameterset>
			<parameterset type="activityParams" >
				<param name="activityType" value="h" />
				<param name="typicalDuration" value="12:00:00" />
			</parameterset>
			<parameterset type="activityParams" >
				<param name="activityType" value="w" />
				<param name="latestStartTime" value="09:00:00" />
				<param name="typicalDuration" value="08:00:00" />
			</parameterset>
			<parameterset type="modeParams" >
				<param name="mode" value="car" />
			</parameterset>
			<parameterset type="modeParams" >
				<param name="constant" value="1.0" />
				<param name="mode" value="pt" />
			</parameterset>
			<parameterset type="modeParams" >
				<param name="mode" value="walk" />
			</parameterset>
			<parameterset type="modeParams" >
				<param name="constant" value="0.0" />
				<param name="mode" value="drt" />
			</parameterset>
			<parameterset type="modeParams" >
				<param name="constant" value="0.0" />
				<param name="dailyMonetaryConstant" value="0.0" />
				<param name="dailyUtilityConstant" value="0.0" />
				<param name="marginalUtilityOfDistance_util_m" value="0.0" />
				<param name="marginalUtilityOfTraveling_util_hr" value="-6.0" />
				<param name="mode" value="drt_teleportation" />
				<param name="monetaryDistanceRate" value="0.0" />
			</parameterset>
		</parameterset>
	</module>
	<module name="plans" >
		<param name="inputPlansFile" value="plans-drt.xml" />
	</module>
	<module name="qsim" >
		<param name="endTime" value="36:00:00" />
		<param name="simStarttimeInterpretation" value="onlyUseStarttime" />
		<param name="startTime" value="00:00:00" />
	</module>
	<module name="strategy" >
		<param name="fractionOfIterationsToDisableInnovation" value="0.8" />
		<parameterset type="strategysettings" >
			<param name="strategyName" value="ChangeExpBeta" />
			<param name="weight" value="0.9" />
		</parameterset>
		<parameterset type="strategysettings" >
			<param name="strategyName" value="ReRoute" />
			<param name="weight" value="0.44" />
		</parameterset>
		<parameterset type="strategysettings" >
			<param name="disableAfterIteration" value="200" />
			<param name="executionPath" value="null" />
			<param name="strategyName" value="SubtourModeChoice" />
			<param name="subpopulation" value="null" />
			<param name="weight" value="10000" />
		</parameterset>
	</module>
	<module name="transit" >
		<!-- The Coordinates Reference System in which the coordinates are expressed in the input file. At import, the coordinates will be converted to the coordinate system defined in "global", and willbe converted back at export. If not specified, no conversion happens. -->
		<param name="inputScheduleCRS" value="null" />
		<param name="insistingOnUsingDeprecatedAttributeFiles" value="false" />
		<!-- Optional input file containing additional attributes for transit lines, stored as ObjectAttributes. -->
		<param name="transitLinesAttributesFile" value="null" />
		<!-- Comma-separated list of transportation modes that are handled as transit. Defaults to 'pt'. -->
		<param name="transitModes" value="pt" />
		<!-- Input file containing the transit schedule to be simulated. -->
		<param name="transitScheduleFile" value="transitSchedule.xml" />
		<!-- Optional input file containing additional attributes for transit stop facilities, stored as ObjectAttributes. -->
		<param name="transitStopsAttributesFile" value="null" />
		<!-- Set this parameter to true if transit should be simulated, false if not. -->
		<param name="useTransit" value="true" />
		<param name="usingTransitInMobsim" value="true" />
		<!-- Input file containing the vehicles used by the departures in the transit schedule. -->
		<param name="vehiclesFile" value="ptVehicles.xml" />
	</module>
	<module name="subtourModeChoice" >
		<!-- Only for backwards compatibility.  Defines if only trips from modes list should change mode, or all trips.  Options: fromAllModesToSpecifiedModes fromSpecifiedModesToSpecifiedModes  -->
		<param name="behavior" value="fromSpecifiedModesToSpecifiedModes" />
		<!-- Defines the chain-based modes, seperated by commas -->
		<param name="chainBasedModes" value="car,bike" />
		<!-- Defines whether car availability must be considered or not. A agent has no car only if it has no license, or never access to a car -->
		<param name="considerCarAvailability" value="false" />
		<!-- Defines all the modes available, including chain-based modes, seperated by commas -->
		<param name="modes" value="drt,pt" />
	</module>
</config>
